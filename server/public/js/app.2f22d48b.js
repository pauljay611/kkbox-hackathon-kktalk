(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],m=0,u=[];m<r.length;m++)o=r[m],s[o]&&u.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(u.length)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={app:0},n=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"11b2":function(t,e,a){},2158:function(t,e,a){},2730:function(t,e,a){"use strict";var i=a("8c19"),s=a.n(i);s.a},3913:function(t,e,a){},"3dfd":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],n={name:"home",components:{}},o=n,r=(a("5c0b"),a("2877")),c=Object(r["a"])(o,i,s,!1,null,null,null);c.options.__file="App.vue";e["a"]=c.exports},"41cb":function(t,e,a){"use strict";var i=a("2b0e"),s=a("8c4f"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"redirect"},[t._v(t._s(t.data))])},o=[],r=(a("cadf"),a("551c"),a("097d"),{name:"redirect",data:function(){return{data:""}},mounted:function(){this.oauthRedirect()},methods:{oauthRedirect:function(){var t=this;this.$axios.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",this.$axios.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded",this.$axios.defaults.transformRequest=[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}],this.$axios.post("/token",{client_id:"6a87d0847e4de3e6fc3f51a79bfc93c6",grant_type:"authorization_code",client_secret:"2151c7c702c1c3c42aedb85a172b254b",code:this.$route.query.code},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.$store.commit("SET_TOKEN",e.data.access_token),t.data=e.data,Pt.push("/")})}}}),c=r,l=a("2877"),d=Object(l["a"])(c,n,o,!1,null,null,null);d.options.__file="Redirect.vue";var m=d.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"talkbox wrap"},[a("div",{staticClass:"main container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"right col-md-12 p-0"},[a("div",{staticClass:"chatroom p-0"},[a("div",{staticClass:"header"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"header-main col-lg-12"},[a("div",{staticClass:"header-title p-0"},[a("router-link",{attrs:{to:"/board"}},[t._v("PKK實業坊")])],1),""!=t.title?a("div",{staticClass:"header-subtitle p-0"},[a("router-link",{attrs:{to:t.title.url}},[t._v(t._s(t.title.name))])],1):t._e()])])])]),a("router-view",{attrs:{title:t.title},on:{handle:t.changeTitle}})],1)])])])])},v=[],p={name:"talkbox",data:function(){return{token:"",data:"",chatroom:"",title:"",linkActive:{url:"/articles",name:"所有文章"}}},methods:{getAuth:function(){window.location.href="https://account.kkbox.com/oauth2/authorize?response_type=code&client_id=6a87d0847e4de3e6fc3f51a79bfc93c6&state=123&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fredirect"},changeTitle:function(t){this.title=t}},created:function(){},beforeDestroy:function(){this.$bus.$off("active")}},f=p,h=(a("eab7"),Object(l["a"])(f,u,v,!1,null,"0c17b3ee",null));h.options.__file="Talkbox.vue";var b=h.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 main"},["123"==t.$store.state.token?a("div",{staticClass:"login mt-3"},[a("a",{staticClass:"btn btn-lg btn-login-kkbox",attrs:{href:"javascript:void(0)"},on:{click:t.getAuth}},[t._v("KKBOX LOGIN")])]):t._e()])])])])},C=[],g={name:"login",data:function(){return{playList:[1,2,3,4,5]}},methods:{getAuth:function(){window.location.href="https://account.kkbox.com/oauth2/authorize?response_type=code&client_id=6a87d0847e4de3e6fc3f51a79bfc93c6&state=123&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fredirect"}},mounted:function(){this.$bus.$emit("active","")}},y=g,k=(a("8ef1"),Object(l["a"])(y,_,C,!1,null,"38b32ea6",null));k.options.__file="Login.vue";var x=k.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"board"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 main"},[a("div",{staticClass:"block m-2"},[a("div",{staticClass:"block-btn"},[a("router-link",{attrs:{to:"/articles"}},[t._v("進入看板")])],1)]),a("div",{staticClass:"block m-2"},[a("div",{staticClass:"block-btn"},[a("router-link",{attrs:{to:"/mailbox"}},[t._v("個人信箱")])],1)]),a("div",{staticClass:"block m-2"},[a("div",{staticClass:"block-btn"},[a("router-link",{attrs:{to:"/profile/"+t.$store.state.profile.id}},[t._v("個人文章")])],1)]),t._m(0)])])])])},w=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block m-2"},[a("div",{staticClass:"block-btn"},[a("a",{attrs:{href:"/"}},[t._v("登出")])])])}],M={name:"login",data:function(){return{}},methods:{init:function(){this.$store.dispatch("getProfile")}},created:function(){this.init()},mounted:function(){this.$emit("handle",""),window.onbeforeunload=function(t){t.preventDefault(),t.returnValue="Write something clever here.."}}},L=M,T=(a("a2e5"),Object(l["a"])(L,$,w,!1,null,"777fa879",null));T.options.__file="Board.vue";var E=T.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[""!=t.user?a("div",{staticClass:"main col-md-12"},[a("div",{staticClass:"profile-header"},[a("div",{staticClass:"profile-photo text-center"},[a("img",{staticClass:"img-fluid rounded",attrs:{src:t.user.images[0].url,alt:""}})]),a("div",{staticClass:"profile-info"},[a("ul",[a("li",[a("a",{attrs:{href:t.user.url,target:"_blank"}},[t._v(t._s(t.user.name))])]),a("li",[a("span",[t._v(t._s(t.user.description))])])])])]),a("div",{staticClass:"profile-content"},t._l(t.articlesList,function(e,i){return a("div",{key:i,staticClass:"articles-content col-md-12 mt-3 p-0 ml-3"},[a("div",{staticClass:"articles-main pl-2"},[a("div",{staticClass:"articles-category"},[a("router-link",{attrs:{to:"/articles/"+e.id}},[t._v("【 "+t._s(e.categoryType)+" 】【 "+t._s(e.category.name)+" 】")])],1),a("div",{staticClass:"articles-title"},[a("router-link",{attrs:{to:"/articles/"+e.id}},[t._v(t._s(e.title))])],1),a("div",{staticClass:"articles-info pr-2"},[a("a",{attrs:{href:e.author.url,target:"_blank"}},[t._v(t._s(e.author.name))]),a("p",{staticClass:"date m-0"},[t._v(t._s(t._f("moment")(e.postTime,"MM/DD")))])])])])}),0)]):t._e()])])])},O=[],P={name:"profile",data:function(){return{user:"",articlesList:[]}},methods:{getProfile:function(){var t=this;this.$firebase.database().ref("test/users/"+this.$route.params.id).once("value").then(function(e){t.user=e.val()})},getArticles:function(){this.articlesList=[];var t=this;this.$firebase.database().ref("test/articles").once("value").then(function(e){var a=e.val();for(var i in a)a[i].author.id==t.$route.params.id&&(a[i].id=i,t.articlesList.push(a[i]))})}},mounted:function(){this.$emit("handle",{url:this.$route.path,name:"個人文章"}),this.getProfile(),this.getArticles()}},A=P,D=(a("f65a"),Object(l["a"])(A,j,O,!1,null,"53de1431",null));D.options.__file="Profile.vue";var N=D.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"post-category col-md-12"},[a("p",{staticClass:"m-0"},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"border rounded pl-3",attrs:{type:"text",placeholder:"搜尋想討論的歌曲、專輯、歌手",disabled:t.disabled},domProps:{value:t.keyword},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t.searchList.length>0?a("div",{staticClass:"searchList col-md-12 mt-3"},[a("p",[t._v("歌手")]),void 0!=t.searchList[0].artists.data?a("ul",{staticClass:"p-0"},t._l(t.searchList[0].artists.data,function(e,i){return a("li",{key:i,staticClass:"pl-3 mt-1",on:{click:function(a){t.chooseCategory(e,"歌手")}}},[t._v("【"+t._s(e.name)+"】")])}),0):t._e(),a("p",[t._v("歌曲")]),void 0!=t.searchList[0].tracks.data?a("ul",{staticClass:"p-0"},t._l(t.searchList[0].tracks.data,function(e,i){return a("li",{key:i,staticClass:"pl-3 mt-1",on:{click:function(a){t.chooseCategory(e,"歌曲")}}},[t._v("【"+t._s(e.name)+"】【"+t._s(e.album.artist.name)+"】")])}),0):t._e(),a("p",[t._v("專輯")]),void 0!=t.searchList[0].albums.data?a("ul",{staticClass:"p-0"},t._l(t.searchList[0].albums.data,function(e,i){return a("li",{key:i,staticClass:"pl-3 mt-1",on:{click:function(a){t.chooseCategory(e,"專輯")}}},[t._v("【"+t._s(e.name)+"】【"+t._s(e.artist.name)+"】")])}),0):t._e()]):t._e(),"disabled"==t.disabled?a("div",{staticClass:"post-title col-md-12 mt-3"},[a("p",{staticClass:"m-0"},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"border rounded pl-3",attrs:{type:"text",placeholder:"輸入標題"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]):t._e(),"disabled"==t.disabled?a("div",{staticClass:"post-content col-md-12 mt-3"},[a("p",{staticClass:"m-0"},[t._v("內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"border rounded pl-3 content",attrs:{type:"text",placeholder:"輸入內容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]):t._e(),"disabled"==t.disabled?a("div",{staticClass:"post-send col-md-12 mt-2"},[t._m(1)]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"postModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[t._v("確認發表文章?")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.postArticle}},[t._v("發表")])])])])])])])])},S=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title col-md-12"},[a("p",{staticClass:"text-center m-0"},[t._v("發表文章")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"send rounded text-center",attrs:{"data-toggle":"modal","data-target":"#postModal"}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("發表")])])}],B=(a("7f7f"),a("96cf"),a("1da1")),K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[t._t("body",[t._v("default body")])],2),t._m(0)])])])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v("Save changes")])])}],I={name:"modal"},W=I,Y=Object(l["a"])(W,K,F,!1,null,null,null);Y.options.__file="Modal.vue";Y.exports;var H={name:"post",data:function(){return{searchList:[],disabled:!1,keyword:"",title:"",content:"",category:"",categoryType:""}},methods:{search:function(){var t=Object(B["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.searchList=[],t.next=3,this.$axios.get("https://api.kkbox.com/v1.1/search?q=".concat(this.keyword,"&territory=TW&limit=5"),{headers:{Authorization:"Bearer "+this.$store.state.token}});case 3:e=t.sent,this.searchList.push(e.data);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),chooseCategory:function(t,e){this.keyword=t.name,"歌曲"==e&&(t=t.album),this.category=t,this.categoryType=e,this.disabled="disabled",this.searchList=[]},postArticle:function(){""!=this.keyword&&""!=this.title&&""!=this.content?(this.$firebase.database().ref("test/articles").push({categoryType:this.categoryType,author:this.$store.state.profile,postTime:Date.now(),category:this.category,title:this.title,content:this.content}),this.$router.push("/articles")):alert("請填入標題與內容!")}},mounted:function(){}},z=H,q=(a("430f"),Object(l["a"])(z,R,S,!1,null,"818a40fa",null));q.options.__file="Post.vue";var U=q.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"articles"},[a("div",{staticClass:"container"},[t.articlesList.length>0?a("div",{staticClass:"row"},[a("div",{staticClass:"searchInput col-md-12 mt-3 pl-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"搜尋文章..."},domProps:{value:t.keyword},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._l(t.articlesList,function(e,i){return a("div",{key:i,staticClass:"articles-content col-md-12 mt-3 p-0"},[a("div",{staticClass:"articles-number text-right p-0",class:t.commentCount(e.comment).color},[t._v(t._s(t.commentCount(e.comment).number))]),a("div",{staticClass:"articles-main pl-2"},[a("div",{staticClass:"articles-category"},[a("router-link",{attrs:{to:"/articles/"+e.id}},[t._v("【 "+t._s(e.categoryType)+" 】【 "+t._s(e.category.name)+" 】")])],1),a("div",{staticClass:"articles-title"},[a("router-link",{attrs:{to:"/articles/"+e.id}},[t._v(t._s(e.title))])],1),a("div",{staticClass:"articles-info pr-2"},[a("router-link",{attrs:{to:"/profile/"+e.author.id}},[t._v(t._s(e.author.name))]),a("p",{staticClass:"date m-0"},[t._v(t._s(t._f("moment")(e.postTime,"MM/DD")))])],1)])])})],2):t._e()]),a("div",{staticClass:"commentBar col-md-12 text-center"},[a("div",{staticClass:"postBtn"},[a("router-link",{attrs:{to:"/post"}},[a("md-icon",[t._v("create")])],1)],1)])])},X=[],J={name:"articles",data:function(){return{articlesList:[],keyword:""}},methods:{commentCount:function(t){var e={number:0,color:""};for(var a in t)"thumb_up"==t[a].type?e.number++:"thumb_down"==t[a].type&&e.number--;return e.number>0&&e.number<100?e.color="thumb_up":e.number>-10?(e.number="",e.color="common"):e.number<=-10?(e.number="X"+-(e.number/10).toFixed(0),e.color="common_grey"):e.number>=100&&(e.number="爆",e.color="thumb_down"),e},search:function(){var t=this;t.articlesList=[],this.$firebase.database().ref("test/articles").once("value").then(function(e){var a=e.val();for(var i in a)(a[i].title.indexOf(t.keyword)>=0||a[i].category.name.indexOf(t.keyword)>=0)&&(a[i].id=i,t.articlesList.push(a[i]))})}},mounted:function(){var t=this;t.articlesList=[],this.$emit("handle",{url:"/articles",name:"所有文章"}),this.$firebase.database().ref("test/articles").once("value").then(function(e){var a=e.val();for(var i in a)a[i].id=i,t.articlesList.push(a[i])})}},G=J,Z=(a("c2a6"),Object(l["a"])(G,V,X,!1,null,"27c895c2",null));Z.options.__file="Articles.vue";var Q=Z.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"articlePage"},[""!=t.articleContent?a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 header mt-3"},[a("div",{staticClass:"header-author"},[a("div",{staticClass:"title"},[t._v("作者")]),a("div",{staticClass:"content"},[a("router-link",{attrs:{to:"/profile/"+t.articleContent.author.id}},[t._v(t._s(t.articleContent.author.name))])],1)]),a("div",{staticClass:"header-category"},[a("div",{staticClass:"title"},[t._v("分類")]),a("div",{staticClass:"content"},[a("a",{attrs:{href:t.articleContent.category.url,target:"_blank"}},[t._v("【 歌手 】【 "+t._s(t.articleContent.category.name)+" 】")])])]),a("div",{staticClass:"header-title"},[a("div",{staticClass:"title"},[t._v("標題")]),a("div",{staticClass:"content"},[t._v(t._s(t.articleContent.title))])]),a("div",{staticClass:"header-time"},[a("div",{staticClass:"title"},[t._v("時間")]),a("div",{staticClass:"content"},[t._v(t._s(t._f("moment")(t.articleContent.postTime,"ddd MMM D   HH:mm:ss YYYY")))])])]),a("div",{staticClass:"main col-md-12 mt-3"},[a("div",{staticClass:"main-header mb-2"},[a("a",{attrs:{href:t.articleContent.category.url,target:"_blank"}},[a("img",{staticClass:"img-fluid",attrs:{src:t.articleContent.category.images[0].url,alt:""}})])]),a("div",{staticClass:"main-content",domProps:{innerHTML:t._s(t.articleContent.content)}}),a("div",{staticClass:"main-bottom"},[a("span",[t._v("--")]),a("p",[t._v("※ 發信站: KK實業坊(pkk.cc)")]),a("p",[t._v("※ 文章網址: "+t._s("http://localhost:8080"+t.$route.path))])]),""!=t.commentContent?a("div",t._l(t.commentContent[0],function(e,i){return a("div",{key:i,staticClass:"main-comment"},[a("div",{staticClass:"emoji pr-2"},[a("md-icon",{class:e.type},[t._v(t._s(e.type))])],1),a("div",{staticClass:"name pr-2"},[a("a",{attrs:{href:e.name.url,target:"_blank"}},[t._v(t._s(e.name.name))]),t._v("\n              : "+t._s(e.content)+"\n            ")]),a("div",{staticClass:"time"},[t._v(t._s(t._f("moment")(e.time,"MM/DD HH:mm")))])])}),0):t._e()])])]):t._e(),""==t.articleContent?a("div",{staticClass:"col-md-12 mt-3 warning"},[t._v("此文章不存在")]):t._e(),""!=t.articleContent?a("div",{staticClass:"commentBar col-md-12 text-center"},[a("div",{staticClass:"commentBtn"},[a("a",{staticClass:"mr-3",attrs:{href:"javascript:void(0)","data-toggle":"modal","data-target":"#commentModal"}},[a("md-icon",[t._v("chat")])],1),t.$store.state.profile.id!=t.articleContent.author.id?a("router-link",{staticClass:"ml-3",attrs:{to:"/mail/"+t.$route.params.id}},[a("md-icon",[t._v("mail")])],1):t._e(),t.$store.state.profile.id==t.articleContent.author.id?a("a",{staticClass:"mr-3",attrs:{href:"javascript:void(0)","data-toggle":"modal","data-target":"#deleteModal"}},[a("md-icon",[t._v("delete")])],1):t._e()],1)]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"commentModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"emoji"},[a("p",{staticClass:"word"},[t._v(t._s(t.commentWord))]),a("div",{staticClass:"icon"},[a("span",{on:{click:function(e){t.changeComment("thumb_up")}}},[a("md-icon",{class:t.active.up},[t._v("thumb_up")])],1),a("span",{on:{click:function(e){t.changeComment("thumb_down")}}},[a("md-icon",{class:t.active.down},[t._v("thumb_down")])],1),a("span",{on:{click:function(e){t.changeComment("chat")}}},[a("md-icon",{class:t.active.chat},[t._v("chat")])],1)])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{type:"text"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.sendComment}},[t._v("確定")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"deleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[t._v("確認刪除文章?")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.deleteArticle}},[t._v("確定")])])])])])])},et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("發表推文")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("刪除文章")])])}],at={name:"articlePage",data:function(){return{articleContent:"",articlesList:[],keyword:"",active:{up:"thumb_up",down:"common",chat:"common"},commentType:"thumb_up",commentWord:"值得推薦",comment:"",commentContent:[]}},methods:{changeComment:function(t){switch(t){case"thumb_up":this.active={up:"thumb_up",down:"common",chat:"common"},this.commentWord="值得推薦",this.commentType="thumb_up";break;case"thumb_down":this.active={up:"common",down:"thumb_down",chat:"common"},this.commentWord="給他噓聲",this.commentType="thumb_down";break;case"chat":this.active={up:"common",down:"common",chat:"chat"},this.commentWord="只加註解",this.commentType="chat";break}},sendComment:function(){this.$firebase.database().ref("test/articles/"+this.$route.params.id+"/comment").push({type:this.commentType,content:this.comment,time:Date.now(),name:this.$store.state.profile}),this.getComment()},getArticle:function(){var t=this;this.$firebase.database().ref("test/articles/"+this.$route.params.id).once("value").then(function(e){t.articleContent=e.val()})},getComment:function(){var t=this;t.commentContent=[],this.$firebase.database().ref("test/articles/"+this.$route.params.id+"/comment").once("value").then(function(e){t.commentContent.push(e.val())})},deleteArticle:function(){this.$firebase.database().ref("test/articles/"+this.$route.params.id).remove(),this.$router.push("/articles")}},mounted:function(){this.getArticle(),this.getComment()}},it=at,st=(a("94b8"),Object(l["a"])(it,tt,et,!1,null,"a6cc2984",null));st.options.__file="Article.vue";var nt=st.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail"},[a("div",{staticClass:"container"},[""!=t.recipient?a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"recipient col-md-12"},[a("p",{staticClass:"m-0"},[t._v("收件者")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient.author.name,expression:"recipient.author.name"}],staticClass:"border rounded pl-3",attrs:{type:"text",placeholder:"作者",disabled:"disabled"},domProps:{value:t.recipient.author.name},on:{input:function(e){e.target.composing||t.$set(t.recipient.author,"name",e.target.value)}}})]),a("div",{staticClass:"mail-category col-md-12 mt-3"},[a("p",{staticClass:"m-0"},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient.category.name,expression:"recipient.category.name"}],staticClass:"border rounded pl-3",attrs:{type:"text",placeholder:"輸入分類",disabled:"disabled"},domProps:{value:t.recipient.category.name},on:{input:function(e){e.target.composing||t.$set(t.recipient.category,"name",e.target.value)}}})]),a("div",{staticClass:"mail-title col-md-12 mt-3"},[a("p",{staticClass:"m-0"},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient.title,expression:"recipient.title"}],staticClass:"border rounded pl-3",attrs:{type:"text",placeholder:"輸入標題",disabled:"disabled"},domProps:{value:t.recipient.title},on:{input:function(e){e.target.composing||t.$set(t.recipient,"title",e.target.value)}}})]),a("div",{staticClass:"mail-content col-md-12 mt-3"},[a("p",{staticClass:"m-0"},[t._v("內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"border rounded pl-3 content",attrs:{type:"text",placeholder:"輸入內容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._m(1),a("div",{staticClass:"modal fade",attrs:{id:"mailModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[t._v("確認發送訊息?")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.sendMail}},[t._v("發送")])])])])])]):t._e()])])},rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title col-md-12"},[a("p",{staticClass:"text-center m-0"},[t._v("回應至作者信箱")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail-send col-md-12 mt-2"},[a("div",{staticClass:"send rounded text-center",attrs:{"data-toggle":"modal","data-target":"#mailModal"}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("發送")])])])}],ct={name:"mail",data:function(){return{searchList:[],disabled:!1,recipient:"",title:"",content:"",category:""}},methods:{getArticle:function(){var t=this;this.$firebase.database().ref("test/articles/"+this.$route.params.id).once("value").then(function(e){t.recipient=e.val()})},sendMail:function(){var t=this;this.$firebase.database().ref("test/users/"+t.recipient.author.id+"/mailbox").push({title:t.recipient.title,content:t.content,time:Date.now(),sender:t.$store.state.profile,category:t.recipient.category,categoryType:t.recipient.categoryType}),this.$firebase.database().ref("test/users/"+t.$store.state.profile.id+"/mailbox").push({title:t.recipient.title,content:t.content,time:Date.now(),sender:t.$store.state.profile,category:t.recipient.category,categoryType:t.recipient.categoryType}),this.$router.push("/mailbox")}},mounted:function(){this.getArticle()}},lt=ct,dt=(a("f051"),Object(l["a"])(lt,ot,rt,!1,null,"10bca214",null));dt.options.__file="MailPost.vue";var mt=dt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mailbox"},[a("div",{staticClass:"container"},[""!=t.mailList?a("div",{staticClass:"row"},t._l(t.mailList,function(e,i){return a("div",{key:i,staticClass:"mail-content col-md-12 mt-3 p-0 ml-2"},[a("div",{staticClass:"mail-number text-right p-0"},[t.$store.state.profile.id==e.sender.id?a("span",{staticClass:"thumb_up"},[t._v("S")]):a("span",{staticClass:"thumb_down"},[t._v("R")])]),a("div",{staticClass:"mail-main pl-2"},[a("div",{staticClass:"mail-category"},[a("router-link",{attrs:{to:"/mailbox/"+i}},[t._v("【 "+t._s(e.categoryType)+" 】【 "+t._s(e.category.name)+" 】")])],1),a("div",{staticClass:"mail-title"},[a("router-link",{attrs:{to:"/mailbox/"+i}},[t._v(t._s(e.title))])],1),a("div",{staticClass:"mail-info pr-2"},[a("a",{attrs:{href:e.sender.url,target:"_blank"}},[t._v(t._s(e.sender.name))]),a("p",{staticClass:"date m-0"},[t._v(t._s(t._f("moment")(e.time,"MM/DD")))])])])])}),0):t._e()])])},vt=[],pt={name:"mailbox",data:function(){return{mailList:"",keyword:""}},methods:{getMail:function(){var t=this;this.$firebase.database().ref("test/users/"+this.$store.state.profile.id+"/mailbox").once("value").then(function(e){t.mailList=e.val()})}},mounted:function(){this.$emit("handle",{url:"/mailbox",name:"個人信箱"}),this.getMail()}},ft=pt,ht=(a("e4b0"),Object(l["a"])(ft,ut,vt,!1,null,"1790a62c",null));ht.options.__file="Mailbox.vue";var bt=ht.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail"},[""!=t.mailContent?a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 header mt-3"},[a("div",{staticClass:"header-author"},[a("div",{staticClass:"title"},[t._v("作者")]),a("div",{staticClass:"content"},[a("a",{attrs:{href:t.mailContent.sender.url,target:"_blank"}},[t._v(t._s(t.mailContent.sender.name))])])]),a("div",{staticClass:"header-category"},[a("div",{staticClass:"title"},[t._v("分類")]),a("div",{staticClass:"content"},[a("a",{attrs:{href:t.mailContent.category.url,target:"_blank"}},[t._v("【 "+t._s(t.mailContent.categoryType)+" 】【 "+t._s(t.mailContent.category.name)+" 】")])])]),a("div",{staticClass:"header-title"},[a("div",{staticClass:"title"},[t._v("標題")]),a("div",{staticClass:"content"},[a("a",{attrs:{href:t.mailContent.category.url,target:"_blank"}},[t._v(t._s(t.mailContent.title))])])]),a("div",{staticClass:"header-time"},[a("div",{staticClass:"title"},[t._v("時間")]),a("div",{staticClass:"content"},[t._v(t._s(t._f("moment")(t.mailContent.time,"ddd MMM D   HH:mm:ss YYYY")))])])]),a("div",{staticClass:"main col-md-12 mt-3"},[a("div",{staticClass:"main-header mb-2"},[a("a",{attrs:{href:t.mailContent.category.url,target:"_blank"}},[a("img",{staticClass:"img-fluid",attrs:{src:t.mailContent.category.images[0].url,alt:""}})])]),a("div",{staticClass:"main-content",domProps:{innerHTML:t._s(t.mailContent.content)}}),t._m(0)])])]):t._e(),""!=t.mailContent?a("div",{staticClass:"commentBar col-md-12 text-center"},[a("div",{staticClass:"commentBtn"},[t.$store.state.profile.id!=t.mailContent.sender.id?a("router-link",{staticClass:"ml-3",attrs:{to:"/reply/"+t.$route.params.id}},[a("md-icon",[t._v("reply")])],1):t._e()],1)]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"commentModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"emoji"},[a("p",{staticClass:"word"},[t._v(t._s(t.commentWord))]),a("div",{staticClass:"icon"},[a("span",{on:{click:function(e){t.changeComment("thumb_up")}}},[a("md-icon",{class:t.active.up},[t._v("thumb_up")])],1),a("span",{on:{click:function(e){t.changeComment("thumb_down")}}},[a("md-icon",{class:t.active.down},[t._v("thumb_down")])],1),a("span",{on:{click:function(e){t.changeComment("chat")}}},[a("md-icon",{class:t.active.chat},[t._v("chat")])],1)])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{type:"text"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.sendComment}},[t._v("確定")])])])])])])},Ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-bottom"},[a("span",[t._v("--")]),a("p",[t._v("※ 發信站: KK實業坊(pkk.cc)")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("發表推文")])])}],gt={name:"mail",data:function(){return{mailContent:"",mailsList:[],keyword:"",active:{up:"thumb_up",down:"common",chat:"common"},commentType:"thumb_up",commentWord:"值得推薦",comment:"",commentContent:[]}},methods:{sendComment:function(){this.$firebase.database().ref("test/mails/"+this.$route.params.id+"/comment").push({type:this.commentType,content:this.comment,time:Date.now(),name:this.$store.state.profile}),this.getComment()},getMail:function(){var t=this;this.$firebase.database().ref("test/users/"+this.$store.state.profile.id+"/mailbox/"+this.$route.params.id).once("value").then(function(e){t.mailContent=e.val()})}},mounted:function(){this.getMail()}},yt=gt,kt=(a("2730"),Object(l["a"])(yt,_t,Ct,!1,null,"c178763e",null));kt.options.__file="Mail.vue";var xt=kt.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail"},[a("div",{staticClass:"container"},[""!=t.recipient?a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"recipient col-md-12"},[a("p",{staticClass:"m-0"},[t._v("收件者")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient.sender.name,expression:"recipient.sender.name"}],staticClass:"border rounded pl-3",attrs:{type:"text",placeholder:"作者",disabled:"disabled"},domProps:{value:t.recipient.sender.name},on:{input:function(e){e.target.composing||t.$set(t.recipient.sender,"name",e.target.value)}}})]),a("div",{staticClass:"mail-category col-md-12 mt-3"},[a("p",{staticClass:"m-0"},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient.category.name,expression:"recipient.category.name"}],staticClass:"border rounded pl-3",attrs:{type:"text",placeholder:"輸入分類",disabled:"disabled"},domProps:{value:t.recipient.category.name},on:{input:function(e){e.target.composing||t.$set(t.recipient.category,"name",e.target.value)}}})]),a("div",{staticClass:"mail-title col-md-12 mt-3"},[a("p",{staticClass:"m-0"},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient.title,expression:"recipient.title"}],staticClass:"border rounded pl-3",attrs:{type:"text",placeholder:"輸入標題",disabled:"disabled"},domProps:{value:t.recipient.title},on:{input:function(e){e.target.composing||t.$set(t.recipient,"title",e.target.value)}}})]),a("div",{staticClass:"mail-content col-md-12 mt-3"},[a("p",{staticClass:"m-0"},[t._v("內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"border rounded pl-3 content",attrs:{type:"text",placeholder:"輸入內容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._m(1),a("div",{staticClass:"modal fade",attrs:{id:"mailModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[t._v("確認發送信件?")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.sendMail}},[t._v("發送")])])])])])]):t._e()])])},wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title col-md-12"},[a("p",{staticClass:"text-center m-0"},[t._v("回應信件")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail-send col-md-12 mt-2"},[a("div",{staticClass:"send rounded text-center",attrs:{"data-toggle":"modal","data-target":"#mailModal"}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("發送")])])])}],Mt={name:"mail",data:function(){return{searchList:[],disabled:!1,recipient:"",title:"",content:"",category:""}},methods:{getMail:function(){var t=this;this.$firebase.database().ref("test/users/"+this.$store.state.profile.id+"/mailbox/"+this.$route.params.id).once("value").then(function(e){t.recipient=e.val()})},sendMail:function(){var t=this,e="(RE) ";t.recipient.title.indexOf("RE")>=0&&(e=""),this.$firebase.database().ref("test/users/"+t.recipient.sender.id+"/mailbox").push({title:e+t.recipient.title,content:t.content,time:Date.now(),sender:t.$store.state.profile,category:t.recipient.category,categoryType:t.recipient.categoryType}),this.$firebase.database().ref("test/users/"+t.$store.state.profile.id+"/mailbox").push({title:e+t.recipient.title,content:t.content,time:Date.now(),sender:t.$store.state.profile,category:t.recipient.category,categoryType:t.recipient.categoryType}),this.$router.push("/mailbox")}},mounted:function(){this.getMail()}},Lt=Mt,Tt=(a("bb11"),Object(l["a"])(Lt,$t,wt,!1,null,"15b506be",null));Tt.options.__file="Reply.vue";var Et=Tt.exports,jt=a("c0d6");i["default"].use(s["a"]);var Ot=new s["a"]({mode:"history",routes:[{path:"/redirect",name:"redirect",component:m},{path:"/",name:"talk",component:b,redirect:"/board",children:[{path:"/board",component:E},{path:"/login",component:x},{path:"/post",component:U},{path:"/mail/:id",component:mt},{path:"/mailbox",component:bt},{path:"/mailbox/:id",component:xt},{path:"/articles",component:Q},{path:"/profile/:id",component:N},{path:"/articles/:id",component:nt},{path:"/reply/:id",component:Et}]}]});Ot.beforeEach(function(t,e,a){"123"!=jt["a"].state.token?a():"/login"!=t.path&&"/redirect"!=t.path?a("/login"):a()});var Pt=e["a"]=Ot},"430f":function(t,e,a){"use strict";var i=a("3913"),s=a.n(i);s.a},"56d7":function(t,e,a){"use strict";a.r(e),function(t){a("cadf"),a("551c"),a("097d");var e=a("2b0e"),i=a("3dfd"),s=a("bc3a"),n=a.n(s),o=a("41cb"),r=a("c0d6"),c=a("1157"),l=a.n(c),d=(a("4989"),a("7c2b"),a("af2e"),a("21b6"),a("43f9")),m=a.n(d),u=(a("51de"),a("8aa5")),v=a("2ead"),p=a.n(v);e["default"].use(m.a);var f={apiKey:"AIzaSyAeBDVgFf35IpZhlaCytMldLXVNgCEOS8Y",authDomain:"kkbox-project.firebaseapp.com",databaseURL:"https://kkbox-project.firebaseio.com",projectId:"kkbox-project",storageBucket:"kkbox-project.appspot.com",messagingSenderId:"646013785232"};u["initializeApp"](f),e["default"].prototype.$firebase=u,e["default"].use(p.a),t.$=l.a,e["default"].prototype.$bus=new e["default"],e["default"].config.productionTip=!1,e["default"].prototype.$axios=n.a,new e["default"]({router:o["a"],store:r["a"],render:function(t){return t(i["a"])},mounted:function(){document.dispatchEvent(new Event("render-event"))}}).$mount("#app")}.call(this,a("c8ba"))},"5c0b":function(t,e,a){"use strict";var i=a("5e27"),s=a.n(i);s.a},"5e27":function(t,e,a){},"69fe":function(t,e,a){},"6dab":function(t,e,a){},"7a5d":function(t,e,a){},"8c19":function(t,e,a){},"8ef1":function(t,e,a){"use strict";var i=a("7a5d"),s=a.n(i);s.a},"94b8":function(t,e,a){"use strict";var i=a("dcb1"),s=a.n(i);s.a},a2e5:function(t,e,a){"use strict";var i=a("2158"),s=a.n(i);s.a},a47f:function(t,e,a){},b981:function(t,e,a){},bb11:function(t,e,a){"use strict";var i=a("6dab"),s=a.n(i);s.a},c0d6:function(t,e,a){"use strict";a("cadf"),a("551c"),a("097d");var i=a("2b0e"),s=a("2f62"),n=a("bc3a"),o=a.n(n),r=a("8aa5");i["default"].use(s["a"]),e["a"]=new s["a"].Store({state:{token:"123",profile:""},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_PROFILE:function(t,e){r["database"]().ref("test/users/"+e.id).once("value").then(function(a){null==a.val()?(t.profile=e,r["database"]().ref("test/users/"+e.id).set(e)):t.profile=a.val()})}},actions:{getProfile:function(t){var e=t.commit;o.a.get("https://api.kkbox.com/v1.1/me",{headers:{Authorization:"Bearer "+this.state.token}}).then(function(t){e("SET_PROFILE",t.data)})}}})},c2a6:function(t,e,a){"use strict";var i=a("69fe"),s=a.n(i);s.a},dcb1:function(t,e,a){},e4b0:function(t,e,a){"use strict";var i=a("11b2"),s=a.n(i);s.a},eab7:function(t,e,a){"use strict";var i=a("f8dc"),s=a.n(i);s.a},f051:function(t,e,a){"use strict";var i=a("a47f"),s=a.n(i);s.a},f65a:function(t,e,a){"use strict";var i=a("b981"),s=a.n(i);s.a},f8dc:function(t,e,a){}});
//# sourceMappingURL=app.2f22d48b.js.map